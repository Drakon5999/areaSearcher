\documentclass[a4paper,12pt,titlepage,finall]{article}

\usepackage[T1,T2A]{fontenc}     % форматы шрифтов
\usepackage[utf8x]{inputenc}     % кодировка символов, используемая в данном файле
\usepackage[russian]{babel}      % пакет русификации
\usepackage{tikz}                % для создания иллюстраций
\usepackage{pgfplots}            % для вывода графиков функций
\usepackage{geometry}		 % для настройки размера полей
\usepackage{indentfirst}         % для отступа в первом абзаце секции

% выбираем размер листа А4, все поля ставим по 3см
\geometry{a4paper,left=30mm,top=30mm,bottom=30mm,right=30mm}

\setcounter{secnumdepth}{0}      % отключаем нумерацию секций

\usepgfplotslibrary{fillbetween} % для изображения областей на графиках

\begin{document}
% Титульный лист
\begin{titlepage}
    \begin{center}
	{\small \sc Московский государственный университет \\имени М.~В.~Ломоносова\\
	Факультет вычислительной математики и кибернетики\\}
	\vfill
	{\Large \sc Отчет по заданию №6}\\
	~\\
	{\large \bf <<Сборка многомодульных программ. \\
	Вычисление корней уравнений и определенных интегралов.>>}\\ 
	~\\
	{\large \bf Вариант 3 / 3 / 2}
    \end{center}
    \begin{flushright}
	\vfill {Выполнил:\\
	студент 104 группы\\
	Лозинский~И.~П.\\
	~\\
	Преподаватель:\\
	Гуляев~Д.~А.}
    \end{flushright}
    \begin{center}
	\vfill
	{\small Москва\\2017}
    \end{center}
\end{titlepage}

% Автоматически генерируем оглавление на отдельной странице
\tableofcontents
\newpage

\section{Постановка задачи}

\begin{itemize}
\item Требуется реализовать численный метод, позволяющий вычислять площадь плоской фигуры,
	ограниченной тремя кривыми
\item Для нахождения корней уравнения использовать метод касательных (Ньютона)
\item Для нахождения интеграла использовать формулу трапеци
\item Отрезки для применения метода нахождения корней должны быть вычислены аналитически
\end{itemize}
Всё перечисленное должно быть реализовано в виде двух модулей: сами функции для анализа на языке assembler NASM и необходимые методы на языке C.
\newpage

\section{Математическое обоснование}
Используемые методы описаны в книге 
Функции и их графики представлены на рис.~\ref{plot1}.
Требуемая итоговая точность $\varepsilon$ = 0.001
Возьмём $\varepsilon_1$ (точность вычисления точек пересечения) и $\varepsilon_2$ (точность вычисления интегралов) равным 0.00001

Оценим максимальную погрешность:
Погрешность итогового значения связанное с приблизительным определением точек пересечения не превосходит
{3*\int^a_{a+e1} {f(x)-g(x)}\,dx} < {3*5*$\varepsilon_1$}.

Погрешность вычисления интеграла не превосходит 3*10*$\varepsilon_2$.

Итого итоговая погрешность меньше требуемой.

\begin{figure}[h]
\centering
\begin{tikzpicture}
\begin{axis}[% grid=both,                % рисуем координатную сетку (если нужно)
             axis lines=middle,          % рисуем оси координат в привычном для математики месте
             restrict x to domain=-2:4,  % задаем диапазон значений переменной x
             restrict y to domain=-1:6,  % задаем диапазон значений функции y(x)
             axis equal,                 % требуем соблюдения пропорций по осям x и y
             enlargelimits,              % разрешаем при необходимости увеличивать диапазоны переменных
             legend cell align=left,     % задаем выравнивание в рамке обозначений
             scale=2]                    % задаем масштаб 2:1

% первая функция
% параметр samples отвечает за качество прорисовки
\addplot[green,samples=256,thick] {exp(-x)+3};
% описание первой функции
\addlegendentry{$y={e^{-x}+3}$}

% добавим немного пустого места между описанием первой и второй функций
\addlegendimage{empty legend}\addlegendentry{}

% вторая функция
% здесь необходимо дополнительно ограничить диапазон значений переменной x
\addplot[blue,domain=-0.5:4,samples=256,thick] {2*x-2};
\addlegendentry{$y={2x-2}$}

% дополнительное пустое место не требуется, так как формулы имеют небольшой размер по высоте

% третья функция
\addplot[red,samples=256,thick] {1/x};
\addlegendentry{$y=\frac{1}{x}$}
\end{axis}
\end{tikzpicture}
\caption{Плоская фигура, ограниченная графиками заданных уравнений}
\label{plot1}
\end{figure}

Интервал вычисления корней выбраны так, чтобы вторая производная разности функций не меняла на нём знак.

\newpage

\section{Результаты экспериментов}

Результаты проведенных вычислений:
координаты точек пересечения (таблица~\ref{table1}) и площадь полученной фигуры.

\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|}
\hline
Кривые & $x$ & $y$ \\
\hline
1 и 2 &  2.539454 & 3.079 \\
2 и 3 &  0.265470 & 0.732 \\
1 и 3 &  1.366025 & 3.767 \\
\hline
\end{tabular}
\caption{Координаты точек пересечения}
\label{table1}
\end{table}

Площадь полученной фигуры: 3.635784

\newpage

\section{Структура программы и спецификация функций}

Программа состоит из двух модулей
main.c и funcs.asm

В funcs.asm описаны данные по условию функции и их производные.

main.c состоит из следующих функций:
\begin{itemize}
\item double root (double f(double), double g(double), double df1(double), double dg1(double), double a, double b, double eps) — принимает на вход функции f и g, а также их вторые производные и находит точку их пересечения на итервале [a;b] с точнотью eps методом касательных.
\item double integral(double f(double), double a, double b, double eps) — ищет интеграл функции f на отрезке [a;b] с точностью eps при помощи формулы трапеций
\item int main(int argc, char * argv[]) — обрабатывает входные аргументы и выводит результаты
\end{itemize}

\newpage

\section{Сборка программы (Make-файл)}

Make-файл имеет следующий вид:

all: project

main.o: main.c

	gcc -std=c99 -m32 -c -o main.o main.c

funcs.o: funcs.asm

	nasm -f elf32 -o funcs.o funcs.asm

project: main.o funcs.o

	gcc -o project main.o funcs.o

clean:

	rm -rf *.o project

\newpage

\section{Отладка программы, тестирование функций}

Тестирование и отладка проводилась при помощи различных тестов, результат работы на которых легко посчитать аналитически. 

Также для тестирования применялись: WolframAlpha и графический калькулятор Desmos

\newpage

\section{Программа на Си и на Ассемблере}
Архив содержит:

makefile

main.c

funcs.asm

report.tex


\newpage

\section{Анализ допущенных ошибок}
Следующий раз постараюсь сделать работу заранее.
\newpage
\begin{raggedright}
\addcontentsline{toc}{section}{Список цитируемой литературы}
\begin{thebibliography}{99}
\bibitem{math} Ильин~В.\,А., Садовничий~В.\,А., Сендов~Бл.\,Х. Математический анализ. Т.\,1~---
    Москва: Наука, 1985.
\end{thebibliography}
\end{raggedright}


\end{document}
